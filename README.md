# machine-vision-plc (Машинное зрение для ПЛК)

Данный проект представляет собой систему машинного зрения для обработки запросов от программируемого логического контроллера (ПЛК) через HTTP-протокол. Система захватывает изображение с камеры, анализирует его с помощью алгоритмов машинного зрения и определяет координаты углов фаски. Эти координаты затем передаются обратно в ПЛК для дальнейшей обработки.

### !!! Важно !!!

Для проверки приложения необходимо разместить изображение в формате **.png** в директорию **images/input**
Изображение с найденными углами будет сохранено в директорию **images/output**

## Требования

- Python 3.10+

## Установка

1. Клонируйте репозиторий:

```bash
git clone https://github.com/fedorov0av/machine-vision-plc.git
cd machine-vision-plc
```

2. Установка и активация виртуального окружения:

```bash
python3 -m venv venv
```

- Для Windows:

```bash
.\venv\Scripts\activate
```

- Для Linux/macOS:

```bash
source venv/bin/activate
```

3. Установите зависимости:

```bash
pip install -r requirements.txt
```

## Запуск сервера

Для запуска сервера на FastAPI используйте команду:

```bash
uvicorn main:app --reload --port 8080
```

Сервер будет доступен по адресу:
'''
http://127.0.0.1:8080
'''
Swagger:
'''
http://127.0.0.1:8080/docs
'''

## Запуск приложения с использованием Docker Compose

Для удобного запуска приложения с необходимыми зависимостями, вы можете использовать `Docker Compose`. Ниже приведена инструкция по запуску приложения через Docker Compose.

### Инструкция по запуску через Docker Compose

'''
docker-compose up --build
'''

## API

### `GET /api/detect_corners/`

#### Запрос

- **Метод**: `POST`
- **URL**: `/api/detect_corners/`

#### Ответ

- **Код статуса**: `200 OK`
- **Содержание**: JSON с координатами двух углов

##### Пример ответа

```json
{
  "corner_1": [0, 0],
  "corner_2": [0, 0]
}
```
